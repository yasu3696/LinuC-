# パーティションの操作

<br>
<br>

## 🧠 `gdisk`の基本概要

-   MBR（`fdisk`など）では対応しきれない**GPT形式のディスク**に対応
-   通常 `/dev/sdX` のようなブロックデバイスを指定して起動
-   メニュー形式で対話的に操作できるのが特徴

## 🛠 基本的な使い方

sudo gdisk /dev/sdX

例えば `/dev/sda` を操作したい場合：

sudo gdisk /dev/sda

起動すると、次のようなメニューが表示されます（対話モード）：

| コマンド | 内容 | 
|-----------------|-----------------|
| `p` | 現在のパーティション情報の表示（print）|
| `n` | 新しいパーティションの作成（new）|
| `d` | パーティションの削除（delete）|
| `t` | パーティションタイプの変更 |
| `w` | 変更を保存して終了（write）|
| `q` | 保存せずに終了（quit）|

<br>

-----------------------

<br>

## 🧠 `fdisk` の基本概要

-   **MBR形式のディスクに対応**
-   **対話型インターフェース**でパーティションの作成・削除・変更が可能
-   root権限が必要（`sudo`を使う）

## 🛠 基本コマンドと操作例

✅ パーティション情報の表示

sudo fdisk -l /dev/sdX

例：`/dev/sda` のパーティション一覧を表示

✅ 対話モードで編集

sudo fdisk /dev/sdX

対話モードに入ると、以下のコマンドが使えます：

| コマンド | 説明 |
|-----------|-----------------|
| `m` | ヘルプメニュー表示 |
| `l` | パーティションタイプの一覧表示 |
| `p` | 現在のパーティションテーブル表示 |
| `n` | 新しいパーティション作成 |
| `t` | パーティションタイプ変更 |
| `a` | ブートフラグの設定/解除 |
| `w` | 変更を保存して終了 |
| `q` | 保存せずに終了 |
| `d` | パーティション削除 |

<br>

--------------------------

<br>

## 🧰 `parted` の基本機能

-   パーティションテーブルの作成（`mklabel`）
-   パーティションの作成・削除・リサイズ（`mkpart`, `rm`, `resizepart`）
-   ファイルシステムの指定（ext4, xfsなど）
-   対話モードとスクリプトモードの両方に対応

<br>

## 🛠 基本構文と使用例

✅ 対話モードで起動

sudo parted /dev/sdX

✅ 非対話モード（スクリプト）

sudo parted -s /dev/sdX mklabel gpt sudo parted -s /dev/sdX mkpart primary ext4 1MiB 100%

📋 対話モードの主なコマンド

| コマンド | 説明 |
|-----------------|----------------|
| `help` | 使用可能なコマンド一覧を表示 |
| `print` | パーティションテーブルの表示 |
| `mklabel` | パーティションテーブルの作成 |
| `mkpart` | 新しいパーティションの作成 |
| `rm`| パーティションの削除 |
| `resizepart` | パーティションのサイズ変更 |
| `quit` | 対話モードの終了 |


<br>

## 🛠 Linuxで`parted`を使ってGPTを設定する手順

<br>

## ✅ スクリプトモード（非対話）で一発設定

### sudo parted -s /dev/sdX mklabel gpt

-   `-s` はスクリプトモード（対話なし）
-   `/dev/sdX` は対象のディスク（例：`/dev/sdb`）

<br>

🧭 mklabel gpt の意味と役割
- mklabel：パーティションテーブルの「ラベル（形式）」を指定・作成するコマンド
- gpt：そのラベルとして GPT（GUID Partition Table）を選択
つまり、mklabel gpt は「このディスクは GPT 形式で管理しますよ」と宣言して、MBR（古い形式）から GPT に切り替える操作です。


<br>

## ✅ 対話モードで設定する場合

### sudo parted /dev/sdX

### 対話モードに入ったら、以下のコマンドを順に入力
(parted) mklabel gpt  <br>
<br>  (parted) print  <br>
(parted) quit
