# 🧠 Linuxのハードウェア構成の基礎

-   **カーネル（Kernel）**  
    Linuxはハードウェアとのやりとりをカーネルが担っています。CPU、メモリ、ストレージ、ネットワークなどのドライバはすべてカーネルが制御。

<br>

-   **デバイスファイル（/dev）**  
    `/dev` ディレクトリには各ハードウェアの抽象化されたファイルがあり、たとえば `sda` は一番目のSATAドライブ、`tty` は仮想ターミナルなどを表します。

<br>

-   **udevとsysfs**  
    `udev` はデバイスの動的管理を、`sysfs`（/sys）はカーネルデバイス情報の仮想ファイルシステムを提供します。

<br>

## 🛠 よく使う設定・確認コマンド

| コマンド | 内容 | 使用例 |
|--------------|------------------|---------------|
| `lscpu` | CPU情報の表示 | コア数やキャッシュ確認 |
| `lsblk` |ストレージの構成確認 | ディスクやパーティション一覧 |
| `lspci` | PCIデバイス一覧表示 | GPUやNICなどの情報取得 |
| `lsusb` | USBデバイス確認 | 接続されたUSB機器表示 |
| `dmesg` | カーネルログ | 起動時のハードウェア検出状況など |
| `inxi -Fxz` | 総合的なハードウェア情報 | より詳細で人間向けの出力（要インストール）|

<br>


------------------------------------------------

## 🧠 `/proc`の概要

-   実際のディスクに保存されたファイルではなく、**カーネルが動的に生成**する仮想ファイル群。
-   主に**現在のシステム状態やプロセスの情報**を確認するために使用。
-   ファイルを「読む」だけで、**リアルタイムな情報取得**ができるのが強み！

## 🔍 よく使う主要ディレクトリ・ファイル

| パス | 目的・内容 | 例 |
|-----------------|-------------------|-------------|
| `/proc/cpuinfo` | CPUのモデル・コア数・周波数など | `cat /proc/cpuinfo` |
| `/proc/meminfo` | メモリの使用状況 | `cat /proc/meminfo` |
| `/proc/version` | カーネルバージョン情報 | `cat /proc/version` |
| `/proc/uptime` | システムの起動後の時間など | `cat /proc/uptime` |
| `/proc/[PID]/` | 特定プロセスの詳細情報 | `cat /proc/1234/status` |
| `/proc/modules` | 現在ロードされているカーネルモジュール | `cat /proc/modules` |
| `/proc/sys/` | システム設定（カーネルパラメータ）| `cat /proc/sys/net/ipv4/ip_forward` |
| `/proc/ioports` | I/Oポートアドレスの情報が格納されているファイル |

<br>

## 🧰 `rmmod`：モジュールを直接アンロード

sudo rmmod <モジュール名>

-   モジュール名は `.ko` 拡張子なしで指定します（例：`rmmod snd_hda_intel`）
-   依存関係がある場合は、アンロードできずエラーになります

## 🧰 `modprobe -r`：依存関係を考慮してアンロード

sudo modprobe -r <モジュール名>

-   `modprobe -r` は依存関係をチェックしてくれるため、`rmmod`より安全
-   例：`sudo modprobe -r e1000e`

## 🔍 アンロード前にモジュール状態の確認

lsmod | grep <モジュール名>

-   モジュールがロードされているかどうかをチェック
-   また、`modinfo <モジュール名>` でモジュールの詳細情報も取得できます
