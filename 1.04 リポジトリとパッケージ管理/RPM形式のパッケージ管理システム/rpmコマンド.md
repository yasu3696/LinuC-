# 🏗 RPMとは何か？

-   **RPMパッケージ**は、アプリケーションやライブラリ、設定ファイルを1つにまとめたアーカイブ形式
-   `.rpm` 拡張子を持ち、パッケージのメタデータ（バージョン、依存関係、提供元など）も含まれる
-   rpm はもともと Red Hat が開発し、今では多くのディストリで標準的に使われている

<br>

## 🔧 基本的な `rpm` コマンド

| コマンド | 説明 |
|--------------|----------------|
| `rpm -ivh foo.rpm` | パッケージのインストール（install）|
| `rpm -Uvh foo.rpm` | アップグレード（またはインストール）|
| `rpm -e パッケージ名` | パッケージの削除（erase）|
| `rpm -q パッケージ名` | パッケージの情報を取得（query）|
| `rpm -ql パッケージ名` | パッケージが展開するファイル一覧 |
| `rpm -qi パッケージ名` | 詳細なパッケージ情報を表示 |
| `rpm -qR パッケージ名` | 依存しているパッケージを表示 |
| `rpm -Va` | パッケージ整合性検査（Verify All）|

📝 `rpm` 単体では**依存解決ができない**ため、通常は `dnf` や `yum` と組み合わせて使います。

<br>

## 🧩 `.rpm` パッケージの構造

RPMは以下のようなセクションを持っています

-   **ヘッダー情報**（名前、バージョン、リリース、アーキテクチャ）
-   **ファイルのアーカイブ**（インストール対象）
-   **スクリプト**（`%pre`, `%post`, `%preun`, `%postun` などの実行指示）



🛠 RPMビルドの基本（簡易版）

Ryutoのように仮想環境や専用ツールを展開する場合、自作RPMも視野に入るはずです

1.  必要なディレクトリ作成：

rpmdev-setuptree

2.  `.spec` ファイルを書く（ビルド指示書）
3.  ソースやファイル配置
4.  ビルド：

rpmbuild -ba myapp.spec

生成物は `~/rpmbuild/RPMS/` に出力されます。

💡 応用例：依存関係チェック

rpm -qpR package.rpm

→ `.rpm` ファイルが**何に依存しているか**を事前チェックできます。

もしよかったら、`.spec` ファイルの書き方や、GPG署名されたRPMの検証（`rpm --checksig`）も紹介できますよ。あるいはRyutoが触ってる `virt-install` や AlmaLinux 向けのパッケージカスタマイズなども🛠️

次はどの方向に掘り下げてみようか。ビルド環境の最小構成づくりとかもきっと面白いはずです！
